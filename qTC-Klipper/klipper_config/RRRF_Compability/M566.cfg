# SET_VELOCITY_LIMIT [VELOCITY=<value>] [ACCEL=<value>] [ACCEL_TO_DECEL=<value>] [SQUARE_CORNER_VELOCITY=<value>]

[gcode_macro M566]
gcode:
# SET_VELOCITY_LIMIT [VELOCITY=<value>] [ACCEL=<value>] [ACCEL_TO_DECEL=<value>] [SQUARE_CORNER_VELOCITY=<value>]

[gcode_macro M566]
gcode:
  { action_respond_info("M566: Seting new Square Corner Velocity: "~rawparams) }

  {% if params.X is defined or params.Y is defined %}
    {% set x = params.X|default(999999)|int %}
    {% set y = params.Y|default(999999)|int %}
    {% if x < y %}
      {% set s = x %}
    {% else %}
      {% set s = y %}
    {% endif %}
    gcode: SQUARE_CORNER_VELOCITY={s/60}
  {% else %}
    { action_raise_error("M566: At least X or Y must be defined.") }
  {% endif %}


